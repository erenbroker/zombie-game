<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<title>Biyoloji Zombi Oyunu - Gelişmiş</title>
<style>
body { margin:0; background:#111; color:white; font-family:Arial; overflow:hidden; }
#gameArea { width:100vw; height:100vh; position:relative; }
#player { width:50px; height:50px; background:blue; position:absolute; bottom:10px; left:50%; transform:translateX(-50%); }
.zombie { width:50px; height:50px; background:green; position:absolute; top:0; }
.bullet { width:8px; height:8px; background:yellow; position:absolute; border-radius:50%; }
#ui { position:absolute; bottom:0; width:100%; background:rgba(0,0,0,0.7); padding:10px; }
#stats { position:absolute; top:10px; left:10px; }
input, button { padding:6px; font-size:16px; }
</style>
</head>
<body>
<div id="gameArea">
    <div id="player"></div>
    <div id="stats">Can: <span id="health">100</span> | Süre: <span id="time">60</span></div>
    <div id="ui">
        <div id="question"></div>
        <input id="answer" placeholder="Cevabı yaz">
        <button onclick="checkAnswer()">Cevapla</button>
        <div id="info"></div>
    </div>
</div>

<script>
let questions = [
 {q:"Hücrenin yönetim merkezi nedir?", a:"çekirdek"},
 {q:"Fotosentez hangi organelde olur?", a:"kloroplast"},
 {q:"Protein sentezi nerede olur?", a:"ribozom"},
 {q:"Canlıların en küçük yapı birimi?", a:"hücre"},
 {q:"DNA hangi evrede eşlenir?", a:"interfaz"},
 {q:"Mitokondrinin görevi nedir?", a:"enerji üretmek"},
 {q:"Hücre zarının yapısı nedir?", a:"fosfolipit"},
 {q:"Fotosentezde oksijen nereden çıkar?", a:"sudan"}
];

let player = document.getElementById("player");
let health = 100;
let time = 60;
let currentQ = 0;
let zombies = [];
let bullets = [];
let canMove = true;
let gameInterval;

function startGame(){
    showQuestion();
    gameInterval = setInterval(gameLoop, 30);
    setInterval(()=>{
        time--;
        document.getElementById("time").innerText = time;
        if(time <= 0) gameOver();
    },1000);
}

function showQuestion(){
    document.getElementById("question").innerText = questions[currentQ].q;
}

function checkAnswer(){
    let val = document.getElementById("answer").value.toLowerCase().trim();
    if(val === questions[currentQ].a){
        spawnZombies(3);
        currentQ++;
        document.getElementById("answer").value="";
        if(currentQ >= questions.length) currentQ = 0;
    } else {
        spawnZombies(5);
    }
}

function spawnZombies(count){
    for(let i=0;i<count;i++){
        let z = document.createElement("div");
        z.className = "zombie";
        z.style.left = Math.random() * (window.innerWidth - 50) + "px";
        z.style.top = "0px";
        document.getElementById("gameArea").appendChild(z);
        zombies.push(z);
    }
}

function shoot(){
    let b = document.createElement("div");
    b.className = "bullet";
    b.style.left = player.offsetLeft + 20 + "px";
    b.style.top = player.offsetTop + "px";
    document.getElementById("gameArea").appendChild(b);
    bullets.push(b);
}

function gameLoop(){
    zombies.forEach((z, zi)=>{
        let top = z.offsetTop + 1.5;
        z.style.top = top + "px";
        if(top > window.innerHeight - 80){
            health -= 10;
            document.getElementById("health").innerText = health;
            z.remove();
            zombies.splice(zi,1);
            if(health <= 0) gameOver();
        }
    });

    bullets.forEach((b, bi)=>{
        let top = b.offsetTop - 8;
        b.style.top = top + "px";
        if(top < 0){ b.remove(); bullets.splice(bi,1); }

        zombies.forEach((z, zi)=>{
            if(b.getBoundingClientRect().intersects(z.getBoundingClientRect())){
                z.remove(); b.remove();
                zombies.splice(zi,1);
                bullets.splice(bi,1);
            }
        });
    });
}

function gameOver(){
    clearInterval(gameInterval);
    document.body.innerHTML = `
    <h1>Oyun Bitti</h1>
    <p>Canın Bitti!</p>
    <button onclick="location.reload()">Tekrar Oyna</button>
    `;
}

window.addEventListener("keydown", e=>{
    if(!canMove) return;
    let left = player.offsetLeft;
    if(e.key === "a" && left > 0) player.style.left = left - 20 + "px";
    if(e.key === "d" && left < window.innerWidth - 50) player.style.left = left + 20 + "px";
    if(e.key === " ") shoot();
});

startGame();
</script>
</body>
</html>
