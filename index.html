<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<title>Zombie Arena</title>
<style>
body {
  margin: 0;
  background: #111;
  overflow: hidden;
  color: white;
  font-family: Arial;
}
#ui {
  position: fixed;
  top: 10px;
  left: 10px;
  font-size: 18px;
}
canvas {
  background: #1f2933;
  display: block;
  margin: auto;
}
</style>
</head>
<body>

<div id="ui">
‚ù§Ô∏è Can: <span id="hp">100</span><br>
üíÄ Dalga: <span id="wave">1</span><br>
üî´ Skor: <span id="score">0</span>
</div>

<canvas id="game" width="800" height="500"></canvas>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

let keys = {};
let mouse = {x:0,y:0};

document.addEventListener("keydown", e => keys[e.key]=true);
document.addEventListener("keyup", e => keys[e.key]=false);
canvas.addEventListener("mousemove", e => {
  const rect = canvas.getBoundingClientRect();
  mouse.x = e.clientX - rect.left;
  mouse.y = e.clientY - rect.top;
});

let player = { x:400, y:250, r:15, speed:3, hp:100 };
let bullets = [];
let zombies = [];
let wave = 1;
let score = 0;

function spawnWave() {
  zombies = [];
  let count = wave * 3;
  for(let i=0;i<count;i++){
    zombies.push({
      x: Math.random()*800,
      y: Math.random()*500,
      hp: 50,
      speed: 0.6 + wave*0.1
    });
  }
}

spawnWave();

canvas.addEventListener("mousedown", () => {
  bullets.push({
    x: player.x,
    y: player.y,
    dx: (mouse.x - player.x) / 10,
    dy: (mouse.y - player.y) / 10
  });
});

function update(){
  // Movement
  if(keys["w"]) player.y -= player.speed;
  if(keys["s"]) player.y += player.speed;
  if(keys["a"]) player.x -= player.speed;
  if(keys["d"]) player.x += player.speed;

  // Bullets
  bullets.forEach(b=>{
    b.x += b.dx;
    b.y += b.dy;
  });

  // Zombies
  zombies.forEach(z=>{
    let dx = player.x - z.x;
    let dy = player.y - z.y;
    let d = Math.hypot(dx,dy);
    z.x += dx/d * z.speed;
    z.y += dy/d * z.speed;

    if(d < 20){
      player.hp -= 0.2;
    }
  });

  // Collision
  bullets.forEach((b,bi)=>{
    zombies.forEach((z,zi)=>{
      if(Math.hypot(b.x-z.x,b.y-z.y)<15){
        z.hp -= 25;
        bullets.splice(bi,1);
        if(z.hp<=0){
          zombies.splice(zi,1);
          score++;
        }
      }
    });
  });

  if(zombies.length === 0){
    wave++;
    spawnWave();
  }

  document.getElementById("hp").innerText = Math.max(0, Math.floor(player.hp));
  document.getElementById("wave").innerText = wave;
  document.getElementById("score").innerText = score;
}

function draw(){
  ctx.clearRect(0,0,800,500);

  // Player
  ctx.fillStyle = "cyan";
  ctx.beginPath();
  ctx.arc(player.x, player.y, player.r, 0, Math.PI*2);
  ctx.fill();

  // Bullets
  ctx.fillStyle = "yellow";
  bullets.forEach(b=>{
    ctx.beginPath();
    ctx.arc(b.x,b.y,4,0,Math.PI*2);
    ctx.fill();
  });

  // Zombies
  ctx.fillStyle = "red";
  zombies.forEach(z=>{
    ctx.beginPath();
    ctx.arc(z.x,z.y,15,0,Math.PI*2);
    ctx.fill();
  });
}

function loop(){
  update();
  draw();
  requestAnimationFrame(loop);
}

loop();
</script>
</body>
</html>

